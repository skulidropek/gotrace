# Go DevTrace

Go DevTrace ‚Äî –ª—ë–≥–∫–∞—è –Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–¥ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –ø–∞–∫–µ—Ç–æ–º `log`, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–±–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω–æ —á–∏—Ç–∞–µ–º—ã–π —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤ –∫ –∫–∞–∂–¥–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π —Å—Ç—Ä–æ—á–∫–æ–π, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ª–æ–≥–∏ –∏ —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–∞—Ä–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìû **–°—Ç–µ–∫ –∏–∑ –∫–æ—Ä–æ–±–∫–∏** ‚Äî –ª—é–±–æ–π `log.Printf/Print/Fatal/Panic` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—á–∞—Ç–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É –≤—ã–∑–æ–≤–æ–≤, –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—è –º–µ—Å—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
- üîß **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤—ã–∑–≤–∞—Ç—å `RedirectStandardLogger()`, –≤–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –æ—Å—Ç–∞—ë—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º.
- üß≠ **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** ‚Äî —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –≥–ª—É–±–∏–Ω–æ–π —Å—Ç–µ–∫–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –≤–æ–∫—Ä—É–≥ –º–µ—Å—Ç–∞ –≤—ã–∑–æ–≤–∞, —à–∞–±–ª–æ–Ω–æ–º —Ñ–∞–π–ª–æ–≤ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- ‚è±Ô∏è **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã** ‚Äî –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã `TraceFunc`, –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏ –±–µ–Ω—á–º–∞—Ä–∫–∏.
- ‚úÖ **–¢–µ—Å—Ç—ã** ‚Äî behavior –∑–∞–∫—Ä–µ–ø–ª—ë–Ω –≤ `stack_logger_test.go`.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```go
import (
    "log"

    devtrace "github.com/hackathon/gotrace"
)

func init() {
    devtrace.SetConfig(devtrace.DevTraceConfig{
        Enabled:     true,
        StackLimit:  5,
        ShowSnippet: 2,
        AppPattern:  "github.com/your-org/your-service",
        DebugLevel:  1,
    })

    devtrace.InstallStackLogger(&devtrace.StackLoggerOptions{
        Prefix:     "üìû CALL STACK",
        Skip:       2,
        Limit:      5,
        AppPattern: "github.com/your-org/your-service",
        Ascending:  true,
    })

    devtrace.RedirectStandardLogger()
}

func main() {
    log.Printf("hello world")
}
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
[DEVTRACE-INFO] üìû CALL STACK
  Route: main
  1. main.go:18 ‚Üí main()
        16 func main() {
        17     // ‚Ä¶
      > 18     log.Printf("hello world")

Message Log: hello world
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ API

- `TraceFunc` / `TraceWithOptions` ‚Äî –æ–±—ë—Ä—Ç–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –≤ —Ç—Ä–µ–π—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–µ–∫–∞ –±–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ª–æ–≥–≥–µ—Ä–∞).
- `TimeFunc`, `TimeFuncWithResult`, `BenchmarkFunc` ‚Äî –±—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

## –ü—Ä–∏–º–µ—Ä

–ü—Ä–æ–µ–∫—Ç `example/` —Å–æ–¥–µ—Ä–∂–∏—Ç –∂–∏–≤—É—é –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é:

```bash
cd example
GOCACHE=$(pwd)/../.gocache go run .
```

## –¢–µ—Å—Ç—ã

```bash
GOCACHE=$(pwd)/.gocache go test ./...
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ MIT.
